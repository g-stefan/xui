// http://code.accursoft.com/caret - 1.3.7
!function(){function i(e){document.activeElement&&document.activeElement===e||e.focus()}jQuery.fn.caret=function(e){var t=this[0],n=t&&"true"===t.contentEditable;if(0!=arguments.length)return t&&(-1==e&&(e=this[n?"text":"val"]().length),window.getSelection?n?(i(t),window.getSelection().collapse(t.firstChild,e)):t.setSelectionRange(e,e):document.body.createTextRange&&(n?((a=document.body.createTextRange()).moveToElementText(t),a.moveStart("character",e),a.collapse(!0)):(a=t.createTextRange()).move("character",e),a.select()),n||i(t)),this;if(t){if(window.getSelection){if(n){i(t);var o=window.getSelection();return o.rangeCount?((r=(c=o.getRangeAt(0)).cloneRange()).selectNodeContents(t),r.setEnd(c.endContainer,c.endOffset),r.toString().length):0}return t.selectionStart}if(document.selection){if(i(t),n){var c=document.selection.createRange();return(r=document.body.createTextRange()).moveToElementText(t),r.setEndPoint("EndToEnd",c),r.text.length}var e=0,a=t.createTextRange(),r=(r=document.selection.createRange().duplicate()).getBookmark();for(a.moveToBookmark(r);0!==a.moveStart("character",-1);)e++;return e}if(t.selectionStart)return t.selectionStart}}}();
